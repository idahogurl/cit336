<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Setup Web Hosting | Backend Web Development</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="336course.css" />
    <link rel="stylesheet" href="prism.css" />
  </head>

  <body>
    <div id="main" class="splash">
      <div id="header">
        <img src="images/largeBanner.jpg" alt="Course Banner" />
      </div>
      <div id="article">
        <h1>Creating a Remote DB</h1>
        <h2>Shared Hosting</h2>
        <p>
          Typically when a hosting account is purchased from a hosting company,
          that account is in a shared environment. This means that the account
          resides on a server with other accounts - this the server is "shared".
          While this is cost effective, it also poses a few challenges. One of
          those challenges is creating and using databases that belong to your
          account and not to someone else.
        </p>

        <h2>Databases in the Control Interface</h2>
        <p>
          In a shared hosting environment, it is important to realize that you
          are restricted from running SQL scripts to create a database and
          provide rights for users to the database. Instead, you must use the
          hosting company's database creation tool, which usually includes a
          means of creating proxy users and granting rights or privileges to
          those users for a particular database.
        </p>
        <p>
          The video below shows the process of creating a database, users and
          assigning the users to the database -- all in a shared hosting
          environment. Though the screens will be different than siteground.com,
          the steps are very similar. Come ask the instructor for help if you
          get stuck.
        </p>
        <iframe
          src="https://www.youtube.com/embed/wG2Dc0aqZ-Q"
          width="560"
          height="315"
          allowfullscreen
        ></iframe>
        <h2>Steps</h2>
        <h3>Open cPanel</h3>
        <ul>
          <li>Log into siteground.com.</li>
          <li>Select "Donâ€™t need help now".</li>
          <li>Click "My Accounts tab".</li>
          <li>
            Click on the red "Go to cPanel" button. <br />*Note: if it fails to
            work read the instruction above to fix.
          </li>
          <li>Click the "Proceed" button.</li>
        </ul>
        <h3>Create Database</h3>
        <figure>
          <figcaption>
            <small><em>SiteGround Database Management</em></small>
          </figcaption>
          <img src="images/mysql-setup.png" alt="" />
        </figure>

        <ul>
          <li>Scroll a long way down.</li>
          <li>Under "Databases" click "MySQL Databases".</li>
          <li>
            Under "Create a New Database" enter <strong>acme</strong> in the New
            Database textbox (first one).
          </li>
          <li>
            The text before, in my case <strong>rebecca1_</strong>, is the part
            of my database name.
          </li>
          <li>Record your database name for later use.</li>
          <li>Click the "Create Database" button.</li>
          <li>Click the "Go Back" button.</li>
        </ul>
        <h3>Create a user</h3>
        <figure>
          <figcaption>
            <small><em>Database User Management</em></small>
          </figcaption>
          <img src="images/add-user.png" alt="" />
        </figure>
        <ul>
          <li>Enter <strong>iClient</strong> in the username textbox.</li>
          <li>
            The text before, in my case <strong>rebecca1_</strong>, is the part
            of my username.
          </li>
          <li>Enter a password.</li>
          <li>Record the username and password for later use.</li>
          <li>Click the "Create a User" button.</li>
          <li>Click "Go Back" button.</li>
          <li>
            Click the "Add" button under "Add a User to a Database" button.
          </li>
          <li>
            Check SELECT, DELETE, INSERT, and UPDATE from the check-boxes.
          </li>
          <li>Click the "Make Changes" button.</li>
          <li>Click the "Go Back" button.</li>
        </ul>

        <h3>Import Data</h3>
        <ul>
          <li>Go back to the cPanel home.</li>
          <li>Scroll back to "Databases" and click "phpMyAdmin".</li>
          <li>
            Once loaded the process is the same as the
            <a
              href="https://blainerobertson.github.io/336d2lv2/views/local_db.html"
              title="Go to local db instructions"
              >local database</a
            >. <br />
            * Note: The database name will have a prefix before "acme".
          </li>
        </ul>

        <h2>Modify connection.php</h2>
        <ul>
          <li>Open your connection.php file</li>
          <li>
            From the code below, copy the IF statement below the function
            acmeConnect. <br />*Note: Make sure to include the curly brace.
          </li>
          <li>
            Place the code above your local connection variables in
            connection.php
          </li>
          <li>
            Then copy the ELSE statement and place it below your local
            connection variable. <br />*Note: Make sure to include the curly
            braces.
          </li>
          <li>
            With the values you recorded, replace the values for the remote
            connection.
          </li>
          <li>Enter <strong>localhost</strong> for $server.</li>
        </ul>
        <pre
          class="line-numbers language-php"
          style="width: 48em; height: 24em"
        >
        <code class="language-php">
        function acmeConnect(){
          if (stripos($_SERVER["HTTP_HOST"], 'localhost') === 0 
              || stripos($_SERVER["HTTP_HOST"], '127.0.0.1') === 0) {
            // Running on local server   
            $server = 'localhost';
            $dbname= 'acme';
            $username = 'iClient';
            $password = 'fCXxC7CW7TVU9HxH';
          } else {
            // Running on remote server
            $server = '';
            $dbname= '';
            $username = '';
            $password = '';
          }
            
          $dsn = "mysql:host=$server;dbname=$dbname";
          $options = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);

          // Create the actual connection object and assign it to a variable
          try {
            $link = new PDO($dsn, $username, $password, $options);
            return $link;
          } catch(PDOException $e) {
            header('Location: /acme/view/500.php');
            exit;
          }
        }
      </code>
    </pre>
      </div>
    </div>
    <script src="prism.js"></script>
  </body>
</html>
